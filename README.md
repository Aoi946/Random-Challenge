# Random Number Challenge - Local Server Edition

高精度機械学習による人間 vs 機械乱数判定システム

## 🎯 概要

ユーザーが入力した数列を分析し、人間が生成したものか機械乱数（メルセンヌツイスター）かを98.31%の精度で判定するローカルWebアプリケーションです。

## ✨ 主要機能

- 🤖 **高精度ML分類**: 527特徴量・98.31%精度のロジスティック回帰モデル
- 📊 **詳細分析**: 27統計指標による包括的ランダム性評価
- 📈 **視覚的比較**: 真乱数分布ヒストグラムとの比較表示
- 🔍 **具体的フィードバック**: 指標別の詳細説明と改善提案
- 📖 **学術的説明**: 各統計指標の理論的背景と計算式

## 🚀 クイックスタート

### 必要環境
- Python 3.6+
- pandas, numpy, scikit-learn, flask

### インストール・実行

```bash
# 1. リポジトリをクローン
git clone https://github.com/Aoi946/Random-Challenge.git
cd Random-Challenge

# 2. 大きなファイルをダウンロード（GitHub Releases から）
# - human_machine_classifier.pkl → exported_classifier/ に配置
# - mt_figures.zip → 展開して mt_figures/ に配置

# 3. 依存関係をインストール
pip install pandas numpy scikit-learn flask

# 4. ローカルサーバーを起動
python3 local_server.py

# 5. ブラウザでアクセス
# http://localhost:5000
```

### 📦 必要なファイルのダウンロード

大きなバイナリファイルは [GitHub Releases](https://github.com/Aoi946/Random-Challenge/releases) から配布しています：

1. **最新リリース**から以下をダウンロード：
   - `human_machine_classifier.pkl` (33KB) - 訓練済みMLモデル
   - `mt_figures.zip` (2MB) - 統計分布ヒストグラム画像

2. **配置**：
   ```bash
   # MLモデル
   mv human_machine_classifier.pkl exported_classifier/

   # ヒストグラム画像
   unzip mt_figures.zip
   ```

## 🧠 モデル性能

| 指標 | 値 |
|------|-----|
| **精度** | 98.31% |
| **適合率** | 100.00% |
| **再現率** | 96.61% |
| **F1スコア** | 98.28% |
| **ROC AUC** | 99.60% |

## 📁 プロジェクト構成

```
Random-Challenge/
├── local_server.py              # Flaskサーバー（メイン）
├── templates/index.html         # ウェブインターフェース
├── exported_classifier/         # ML分類機
│   ├── human_machine_classifier.pkl  # 訓練済みモデル
│   ├── calculate_features.py    # 特徴量計算
│   └── stat/, trans/            # 特徴量ライブラリ
├── checker/                     # ランダム性分析
│   ├── randomness_checker.py    # 詳細分析機能
│   └── mt_randomness_bounds.csv # 統計的境界値
├── mt_figures/                  # ヒストグラム画像
│   └── *_histogram.png          # 各指標の分布図
└── README.md                    # このファイル
```

## 🔬 分析機能

### 1. 基本分類
- 人間 vs 機械乱数の2クラス分類
- 確率スコアと信頼度表示

### 2. 詳細分析（人間判定時）
- **27統計指標**の境界値チェック
- **具体的改善提案**の生成
- **真乱数分布**との視覚的比較

### 3. 統計指標カテゴリ
- **頻度分析**: 各数字(0-9)の出現頻度
- **隣接分析**: 連続数字間のパターン
- **遷移確率**: 1-5ステップの状態遷移
- **エントロピー**: 情報理論的ランダム性
- **自己相関**: 系列間の依存性
- **パターン検出**: ポーカーテスト、フェーズ長分析

## 🎨 使用例

### 入力例
```
3,0,3,4,5,8,2,6,0,6,9,2,0,7,0,3,2,5,2,0,7,3,3,8,6,8,3,0,7,9,0,6,0,1,3,7,1,3,6,1,0,8,2,6,1,2,9,1,3,8,0,0,6,6,5,8,1,8,0,6,8,9,4,4,3,1,8,8,7,1,2,1,4,3,6,1,8,8,8,5,9,4,5,2,9,9,2,3,3,8,2,0,1,1,4,4,6,8,5,4,5,3,3,7,1,2,9,1,9,0,0,0,3,1,2,5,6,0,0,3,6,3,1,4,7,7,6,6,5,0,2,0,4,7,1,5,6,7,0,7,4,3,7,2,6,2,4,9,3,8,4,9,0,1,3,0,8,9,5,3,7,5,3,6,4,5,2,8,1,1,1,7,2,9,2,5,8,6,0,2,3,3,0,3,4,1,3,1,5,0,2,7,3,2,3,9,8,3,4,5,7,4,7,3,9,6,4,8,9,8,7,0,4,6,1,0,6,9,4,3,9,1,9,7,6,2,0,7,3,4,8,8,1,2,1,2,9,3,9,3,3,0,4,4,2,5,7,3,4,2,4,2,5,0,7,6,3,3,5,9,4,6,1,3,4,0,3,8,6,2,7,3,4,0,4,0,8,5,6,4,6,1,9,2,1,3,2,0,7,1,9,9,5,6,7,5,7,9,1,2
```

### 出力例（人間判定時）
- **判定**: 人間生成 (95.2%信頼度)
- **改善必要指標**: 数字7の過多使用、隣接パターン検出
- **具体的提案**: "数字7を16.3%使用（理想10%）。無意識に好む数字を避け、他の数字も選んでください"
- **視覚化**: 数字7頻度の真乱数分布ヒストグラム表示

## 🔧 技術詳細

### アルゴリズム
- **分類器**: ロジスティック回帰 (L2正則化, C=1.0)
- **前処理**: StandardScaler (Z-score正規化)
- **特徴量**: 527次元ベクトル

### 特徴量構成
- **統計的指標** (27個): エントロピー、自己相関、頻度分析等
- **遷移確率** (500個): 1-5ステップの状態遷移行列

### 訓練データ
- **人間データ**: 20被験者による196系列
- **機械データ**: メルセンヌツイスター生成
- **検証**: 5-fold交差検証 + 30%ホールドアウト

## 📚 参考文献

本プロジェクトは以下の統計手法を実装しています：
- Shannon情報理論
- クーポンコレクター問題
- ポーカーテスト
- ターニングポイント分析
- 自己相関関数
- マルコフ連鎖状態遷移

## 📄 ライセンス

このプロジェクトはrnglib-self研究プロジェクトの一部です。